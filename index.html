<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Tic Tac Toe</title>
  <style>
    body {
      background: #0f0f0f;
      color: white;
      font-family: 'Segoe UI', sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
    }
    #game {
      display: grid;
      grid-template-columns: repeat(3, 100px);
      gap: 15px;
      margin-top: 40px;
    }
    .cell {
      width: 100px;
      height: 100px;
      background: #1e1e1e;
      border-radius: 15px;
      font-size: 2.5rem;
      font-weight: bold;
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: 0 0 15px rgba(255, 255, 255, 0.05);
      transition: background 0.3s, transform 0.2s;
    }
    .cell:hover {
      background: #292929;
      box-shadow: 0 0 10px #00ffff80;
    }
    .X { color: #00faff; text-shadow: 0 0 10px #00faff; }
    .O { color: #ff4fc2; text-shadow: 0 0 10px #ff4fc2; }
    .win { transform: scale(1.2); }
    #status { margin-top: 25px; font-size: 1.4em; }
    #reset {
      margin-top: 20px;
      padding: 10px 25px;
      font-size: 1em;
      cursor: pointer;
      background: #ff4081;
      border: none;
      color: white;
      border-radius: 8px;
      box-shadow: 0 4px 10px rgba(255, 64, 129, 0.4);
    }
  </style>
</head>
<body>

<div id="game"></div>
<div id="status"></div>
<button id="reset">Reset</button>

<audio id="winSound" src="correct.mp3" preload="auto"></audio>

<script>
  const game = document.getElementById('game');
  const statusDiv = document.getElementById('status');
  const resetBtn = document.getElementById('reset');
  const winSound = document.getElementById('winSound');

  let board = Array(9).fill('');
  let gameActive = true;
  let firstPlayer = 'X';
  let currentPlayer = firstPlayer;

  const combos = [
    [0,1,2], [3,4,5], [6,7,8],
    [0,3,6], [1,4,7], [2,5,8],
    [0,4,8], [2,4,6]
  ];

  function renderBoard(highlight = []) {
    game.innerHTML = '';
    board.forEach((val, i) => {
      const div = document.createElement('div');
      div.className = 'cell';
      if (val) {
        div.textContent = val;
        div.classList.add(val);
        if (highlight.includes(i)) div.classList.add('win');
      }
      div.addEventListener('click', () => handleClick(i));
      game.appendChild(div);
    });
  }

  function handleClick(i) {
    if (!gameActive || board[i] || currentPlayer !== 'X') return;
    board[i] = 'X';
    renderBoard();
    const result = checkWinner();
    if (result) return endGame(result.winner, result.combo);
    currentPlayer = 'O';
    setTimeout(botMove, 300);
  }

  function botMove() {
    if (!gameActive) return;
    const move = bestMove();
    if (move !== undefined) {
      board[move] = 'O';
      renderBoard();
      const result = checkWinner();
      if (result) return endGame(result.winner, result.combo);
    }
    currentPlayer = 'X';
  }

  function bestMove() {
    let bestScore = -Infinity;
    let move;
    for (let i = 0; i < board.length; i++) {
      if (board[i] === '') {
        board[i] = 'O';
        let score = minimax(board, 0, false);
        board[i] = '';
        if (score > bestScore) {
          bestScore = score;
          move = i;
        }
      }
    }
    return move;
  }

  const scores = { 'O': 1, 'X': -1, 'tie': 0 };

  function minimax(newBoard, depth, isMaximizing) {
    let result = checkResult(newBoard);
    if (result !== null) return scores[result];

    if (isMaximizing) {
      let best = -Infinity;
      for (let i = 0; i < newBoard.length; i++) {
        if (newBoard[i] === '') {
          newBoard[i] = 'O';
          let score = minimax(newBoard, depth + 1, false);
          newBoard[i] = '';
          best = Math.max(score, best);
        }
      }
      return best;
    } else {
      let best = Infinity;
      for (let i = 0; i < newBoard.length; i++) {
        if (newBoard[i] === '') {
          newBoard[i] = 'X';
          let score = minimax(newBoard, depth + 1, true);
          newBoard[i] = '';
          best = Math.min(score, best);
        }
      }
      return best;
    }
  }

  function checkWinner() {
    for (const [a, b, c] of combos) {
      if (board[a] && board[a] === board[b] && board[a] === board[c]) {
        return { winner: board[a], combo: [a, b, c] };
      }
    }
    if (!board.includes('')) return { winner: 'Draw', combo: [] };
    return null;
  }

  function checkResult(b) {
    for (const [a, b1, c] of combos) {
      if (b[a] && b[a] === b[b1] && b[a] === b[c]) return b[a];
    }
    if (!b.includes('')) return 'tie';
    return null;
  }

  function endGame(winner, combo) {
    gameActive = false;
    renderBoard(combo);
    if (winner !== 'Draw') winSound.play();
    statusDiv.textContent = winner === 'Draw' ? 'Draw!' : `${winner} wins!`;
  }

  resetBtn.addEventListener('click', () => {
    board = Array(9).fill('');
    gameActive = true;
    currentPlayer = (firstPlayer = firstPlayer === 'X' ? 'O' : 'X');
    statusDiv.textContent = '';
    renderBoard();
    if (currentPlayer === 'O') setTimeout(botMove, 300);
  });

  renderBoard();
</script>

</body>
</html>
